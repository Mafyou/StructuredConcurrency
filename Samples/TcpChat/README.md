The code in this sample is copied from https://github.com/StephenClearyExamples/TcpChat, changed to use Structured Concurrency instead of fire-and-forget.